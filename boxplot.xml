<tool id="boxplot" name="Boxplot" version="1.0.1">
  <description>for miccroarray matrix expression</description>
  <command interpreter="bash">r_wrapper.sh $script_file</command>

  <inputs>
      <param name="input" type="data" format="tabular" label="Dataset matrix"/>
	  <param name="out_prefix"  value="Boxplot" type="text" label="Title for the output file" size ="80" />
  </inputs>

  <configfiles>
    <configfile name="script_file">
    ## Setup R error handling to go to stderr
    options( show.error.messages=F,error = function () { cat( geterrmessage(), file=stderr() ); q( "no", 1, F ) } )
	## open MadPro library
	library(MadProDev,quietly=TRUE)
	##source("/home/ehirchaud/MadProDev/R/graph_png.R")
	mat = read.delim( "${input.file_name}",row.names=1 )
	print("${boxplot_file.file_name}")
	print("${boxplot_file.ext}")
	create_boxplot(mat,"${boxplot_file.file_name}")	
	HTML_img("${boxplot_file.file_name}","${html_file}")
    </configfile>
  </configfiles>

  <outputs>
	  <data format="html" name="html_file" label="${out_prefix}.html" />
	  <data format="jpg" name="boxplot_file" label="boxPlot_${out_prefix}.jpg" />
  </outputs>

    <tests>
        <test>
        </test>
    </tests>
<help>

</help>
</tool>
